/********************************************
 * REVOLUTION 5.0 EXTENSION - CAROUSEL
 * @version: 1.1 (12.10.2015)
 * @requires jquery.themepunch.revolution.js
 * @author ThemePunch
*********************************************/
!function(a){"use strict";var b=jQuery.fn.revolution;jQuery.extend(!0,b,{prepareCarousel:function(a,c,g){g=a.carousel.lastdirection=e(g,a.carousel.lastdirection),d(a),a.carousel.slide_offset_target=i(a),void 0==c?b.carouselToEvalPosition(a,g):f(a,g,!1)},carouselToEvalPosition:function(a,c){var d=a.carousel;c=d.lastdirection=e(c,d.lastdirection);var g="center"===d.horizontal_align?(d.wrapwidth/2-d.slide_width/2-d.slide_globaloffset)/d.slide_width:(0-d.slide_globaloffset)/d.slide_width,h=b.simp(g,a.slideamount,!1),i=h-Math.floor(h),j=0,k=-1*(Math.ceil(h)-h),l=-1*(Math.floor(h)-h);j=i>=.3&&"left"===c||i>=.7&&"right"===c?k:i<.3&&"left"===c||i<.7&&"right"===c?l:j,j="off"===d.infinity?h<0?h:g>a.slideamount-1?g-(a.slideamount-1):j:j,d.slide_offset_target=j*d.slide_width,0!==Math.abs(d.slide_offset_target)?f(a,c,!0):b.organiseCarousel(a,c)},organiseCarousel:function(a,b,c,d){b=void 0===b||"down"==b||"up"==b||null===b||jQuery.isEmptyObject(b)?"left":b;for(var e=a.carousel,f=new Array,g=e.slides.length,h="right"===e.horizontal_align?h=a.width:0,i=0;i<g;i++){var j=i*e.slide_width+e.slide_offset;"on"===e.infinity&&(j=j>e.wrapwidth-e.inneroffset&&"right"==b?e.slide_offset-(e.slides.length-i)*e.slide_width:j,j=j<0-e.inneroffset-e.slide_width&&"left"==b?j+e.maxwidth:j),f[i]=j}var k=999;e.slides&&jQuery.each(e.slides,function(d,h){var i=f[d];"on"===e.infinity&&(i=i>e.wrapwidth-e.inneroffset&&"left"===b?f[0]-(g-d)*e.slide_width:i,i=i<0-e.inneroffset-e.slide_width?"left"==b?i+e.maxwidth:"right"===b?f[g-1]+(d+1)*e.slide_width:i:i);var j=new Object;j.left=i+e.inneroffset;var l="center"===e.horizontal_align?(Math.abs(e.wrapwidth/2)-(j.left+e.slide_width/2))/e.slide_width:(e.inneroffset-j.left)/e.slide_width,n="center"===e.horizontal_align?2:1;if((c&&Math.abs(l)<k||0===l)&&(k=Math.abs(l),e.focused=d),j.width=e.slide_width,j.x=0,j.transformPerspective=1200,j.transformOrigin="50% "+e.vertical_align,"on"===e.fadeout)if("on"===e.vary_fade)j.autoAlpha=1-Math.abs(1/Math.ceil(e.maxVisibleItems/n)*l);else switch(e.horizontal_align){case"center":j.autoAlpha=Math.abs(l)<Math.ceil(e.maxVisibleItems/n-1)?1:1-(Math.abs(l)-Math.floor(Math.abs(l)));break;case"left":j.autoAlpha=l<1&&l>0?1-l:Math.abs(l)>e.maxVisibleItems-1?1-(Math.abs(l)-(e.maxVisibleItems-1)):1;break;case"right":j.autoAlpha=l>-1&&l<0?1-Math.abs(l):l>e.maxVisibleItems-1?1-(Math.abs(l)-(e.maxVisibleItems-1)):1}else j.autoAlpha=Math.abs(l)<Math.ceil(e.maxVisibleItems/n)?1:0;if(void 0!==e.minScale&&e.minScale>0)if("on"===e.vary_scale){j.scale=1-Math.abs(e.minScale/100/Math.ceil(e.maxVisibleItems/n)*l);var o=(e.slide_width-e.slide_width*j.scale)*Math.abs(l)}else{j.scale=l>=1||l<=-1?1-e.minScale/100:(100-e.minScale*Math.abs(l))/100;var o=(e.slide_width-e.slide_width*(1-e.minScale/100))*Math.abs(l)}void 0!==e.maxRotation&&0!=Math.abs(e.maxRotation)&&("on"===e.vary_rotation?(j.rotationY=Math.abs(e.maxRotation)-Math.abs((1-Math.abs(1/Math.ceil(e.maxVisibleItems/n)*l))*e.maxRotation),j.autoAlpha=Math.abs(j.rotationY)>90?0:j.autoAlpha):j.rotationY=l>=1||l<=-1?e.maxRotation:Math.abs(l)*e.maxRotation,j.rotationY=l<0?j.rotationY*-1:j.rotationY),j.x=-1*e.space*l,j.left=Math.floor(j.left),j.x=Math.floor(j.x),void 0!==j.scale?l<0?j.x-o:j.x+o:j.x,j.zIndex=Math.round(100-Math.abs(5*l)),j.transformStyle="3D"!=a.parallax.type&&"3d"!=a.parallax.type?"flat":"preserve-3d",punchgs.TweenLite.set(h,j)}),d&&(a.c.find(".next-revslide").removeClass("next-revslide"),jQuery(e.slides[e.focused]).addClass("next-revslide"),a.c.trigger("revolution.nextslide.waiting"));e.wrapwidth/2-e.slide_offset,e.maxwidth+e.slide_offset-e.wrapwidth/2}});var c=function(a){var b=a.carousel;b.infbackup=b.infinity,b.maxVisiblebackup=b.maxVisibleItems,b.slide_globaloffset="none",b.slide_offset=0,b.wrap=a.c.find(".tp-carousel-wrapper"),b.slides=a.c.find(".tp-revslider-slidesli"),0!==b.maxRotation&&("3D"!=a.parallax.type&&"3d"!=a.parallax.type?punchgs.TweenLite.set(b.wrap,{perspective:1200,transformStyle:"flat"}):punchgs.TweenLite.set(b.wrap,{perspective:1600,transformStyle:"preserve-3d"})),void 0!==b.border_radius&&parseInt(b.border_radius,0)>0&&punchgs.TweenLite.set(a.c.find(".tp-revslider-slidesli"),{borderRadius:b.border_radius})},d=function(a){void 0===a.bw&&b.setSize(a);var d=a.carousel,e=b.getHorizontalOffset(a.c,"left"),f=b.getHorizontalOffset(a.c,"right");void 0===d.wrap&&c(a),d.slide_width="on"!==d.stretch?a.gridwidth[a.curWinRange]*a.bw:a.c.width(),d.maxwidth=a.slideamount*d.slide_width,d.maxVisiblebackup>d.slides.length+1&&(d.maxVisibleItems=d.slides.length+2),d.wrapwidth=d.maxVisibleItems*d.slide_width+(d.maxVisibleItems-1)*d.space,d.wrapwidth="auto"!=a.sliderLayout?d.wrapwidth>a.c.closest(".tp-simpleresponsive").width()?a.c.closest(".tp-simpleresponsive").width():d.wrapwidth:d.wrapwidth>a.ul.width()?a.ul.width():d.wrapwidth,d.infinity=d.wrapwidth>=d.maxwidth?"off":d.infbackup,d.wrapoffset="center"===d.horizontal_align?(a.c.width()-f-e-d.wrapwidth)/2:0,d.wrapoffset="auto"!=a.sliderLayout&&a.outernav?0:d.wrapoffset<e?e:d.wrapoffset;var g="hidden";"3D"!=a.parallax.type&&"3d"!=a.parallax.type||(g="visible"),"right"===d.horizontal_align?punchgs.TweenLite.set(d.wrap,{left:"auto",right:d.wrapoffset+"px",width:d.wrapwidth,overflow:g}):punchgs.TweenLite.set(d.wrap,{right:"auto",left:d.wrapoffset+"px",width:d.wrapwidth,overflow:g}),d.inneroffset="right"===d.horizontal_align?d.wrapwidth-d.slide_width:0,d.realoffset=Math.abs(d.wrap.position().left),d.windhalf=jQuery(window).width()/2},e=function(a,b){return null===a||jQuery.isEmptyObject(a)?b:void 0===a?"right":a},f=function(a,c,d){var f=a.carousel;c=f.lastdirection=e(c,f.lastdirection);var g=new Object;g.from=0,g.to=f.slide_offset_target,void 0!==f.positionanim&&f.positionanim.pause(),f.positionanim=punchgs.TweenLite.to(g,1.2,{from:g.to,onUpdate:function(){f.slide_offset=f.slide_globaloffset+g.from,f.slide_offset=b.simp(f.slide_offset,f.maxwidth),b.organiseCarousel(a,c,!1,!1)},onComplete:function(){f.slide_globaloffset="off"===f.infinity?f.slide_globaloffset+f.slide_offset_target:b.simp(f.slide_globaloffset+f.slide_offset_target,f.maxwidth),f.slide_offset=b.simp(f.slide_offset,f.maxwidth),b.organiseCarousel(a,c,!1,!0);var e=jQuery(a.li[f.focused]);a.c.find(".next-revslide").removeClass("next-revslide"),d&&b.callingNewSlide(a.c,e.data("index"))},ease:punchgs.Expo.easeOut})},g=function(a,b){return Math.abs(a)>Math.abs(b)?a>0?a-Math.abs(Math.floor(a/b)*b):a+Math.abs(Math.floor(a/b)*b):a},h=function(a,b,c){var c,c,d=b-a,e=b-c-a;return d=g(d,c),e=g(e,c),Math.abs(d)>Math.abs(e)?e:d},i=function(a){var c=0,d=a.carousel;if(void 0!==d.positionanim&&d.positionanim.kill(),"none"==d.slide_globaloffset)d.slide_globaloffset=c="center"===d.horizontal_align?d.wrapwidth/2-d.slide_width/2:0;else{d.slide_globaloffset=d.slide_offset,d.slide_offset=0;var e=a.c.find(".processing-revslide").index(),f="center"===d.horizontal_align?(d.wrapwidth/2-d.slide_width/2-d.slide_globaloffset)/d.slide_width:(0-d.slide_globaloffset)/d.slide_width;f=b.simp(f,a.slideamount,!1),e=e>=0?e:a.c.find(".active-revslide").index(),e=e>=0?e:0,c="off"===d.infinity?f-e:-h(f,e,a.slideamount),c*=d.slide_width}return c}}(jQuery);