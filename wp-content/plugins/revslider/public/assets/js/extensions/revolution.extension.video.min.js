/********************************************
 * REVOLUTION 5.2.5.1 EXTENSION - VIDEO FUNCTIONS
 * @version: 2.0.1 (18.10.2016)
 * @requires jquery.themepunch.revolution.js
 * @author ThemePunch
*********************************************/
!function(a){"use strict";function d(a){return void 0==a?-1:jQuery.isNumeric(a)?a:a.split(":").length>1?60*parseInt(a.split(":")[0],0)+parseInt(a.split(":")[1],0):a}var b=jQuery.fn.revolution,c=b.is_mobile();jQuery.extend(!0,b,{preLoadAudio:function(a,c){a.find(".tp-audiolayer").each(function(){var a=jQuery(this),d={};0===a.find("audio").length&&(d.src=void 0!=a.data("videomp4")?a.data("videomp4"):"",d.pre=a.data("videopreload")||"",void 0===a.attr("id")&&a.attr("audio-layer-"+Math.round(199999*Math.random())),d.id=a.attr("id"),d.status="prepared",d.start=jQuery.now(),d.waittime=1e3*a.data("videopreloadwait")||5e3,"auto"!=d.pre&&"canplaythrough"!=d.pre&&"canplay"!=d.pre&&"progress"!=d.pre||(void 0===c.audioqueue&&(c.audioqueue=[]),c.audioqueue.push(d),b.manageVideoLayer(a,c)))})},preLoadAudioDone:function(a,b,c){b.audioqueue&&b.audioqueue.length>0&&jQuery.each(b.audioqueue,function(b,d){a.data("videomp4")!==d.src||d.pre!==c&&"auto"!==d.pre||(d.status="loaded")})},resetVideo:function(a,e){var f=a.data();switch(f.videotype){case"youtube":f.player;try{if("on"==f.forcerewind){var h=d(a.data("videostartat")),i=h==-1,j=1===f.bgvideo||a.find(".tp-videoposter").length>0;h=h==-1?0:h,void 0!=f.player&&(0!==h&&!i||j)&&(f.player.seekTo(h),f.player.pauseVideo())}}catch(a){}0==a.find(".tp-videoposter").length&&1!==f.bgvideo&&punchgs.TweenLite.to(a.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"vimeo":var k=$f(a.find("iframe").attr("id"));try{if("on"==f.forcerewind){var h=d(f.videostartat),i=h==-1,j=1===f.bgvideo||a.find(".tp-videoposter").length>0;h=h==-1?0:h,(0!==h&&!i||j)&&(k.api("seekTo",h),k.api("pause"))}}catch(a){}0==a.find(".tp-videoposter").length&&1!==f.bgvideo&&punchgs.TweenLite.to(a.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"html5":if(c&&1==f.disablevideoonmobile)return!1;var m="html5"==f.audio?"audio":"video",n=a.find(m),o=n[0];if(punchgs.TweenLite.to(n,.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"on"==f.forcerewind&&!a.hasClass("videoisplaying"))try{var h=d(f.videostartat);o.currentTime=h==-1?0:h}catch(a){}("mute"==f.volume||b.lastToggleState(a.videomutetoggledby)||e.globalmute===!0)&&(o.muted=!0)}},isVideoMuted:function(a,b){var c=!1,d=a.data();switch(d.videotype){case"youtube":try{var e=d.player;c=e.isMuted()}catch(a){}break;case"vimeo":try{$f(a.find("iframe").attr("id"));"mute"==d.volume&&(c=!0)}catch(a){}break;case"html5":var g="html5"==d.audio?"audio":"video",h=a.find(g),i=h[0];i.muted&&(c=!0)}return c},muteVideo:function(a,b){var c=a.data();switch(c.videotype){case"youtube":try{var d=c.player;d.mute()}catch(a){}break;case"vimeo":try{var e=$f(a.find("iframe").attr("id"));a.data("volume","mute"),e.api("setVolume",0)}catch(a){}break;case"html5":var f="html5"==c.audio?"audio":"video",g=a.find(f),h=g[0];h.muted=!0}},unMuteVideo:function(a,b){if(b.globalmute!==!0){var c=a.data();switch(c.videotype){case"youtube":try{var d=c.player;d.unMute()}catch(a){}break;case"vimeo":try{var e=$f(a.find("iframe").attr("id"));a.data("volume","1"),e.api("setVolume",1)}catch(a){}break;case"html5":var f="html5"==c.audio?"audio":"video",g=a.find(f),h=g[0];h.muted=!1}}},stopVideo:function(a,b){var c=a.data();switch(b.leaveViewPortBasedStop||(b.lastplayedvideos=[]),b.leaveViewPortBasedStop=!1,c.videotype){case"youtube":try{var d=c.player;if(2===d.getPlayerState()||5===d.getPlayerState())return;d.pauseVideo(),c.youtubepausecalled=!0,setTimeout(function(){c.youtubepausecalled=!1},80)}catch(a){console.log("Issue at YouTube Video Pause:"),console.log(a)}break;case"vimeo":try{var e=$f(a.find("iframe").attr("id"));e.api("pause"),c.vimeopausecalled=!0,setTimeout(function(){c.vimeopausecalled=!1},80)}catch(a){console.log("Issue at Vimeo Video Pause:"),console.log(a)}break;case"html5":var f="html5"==c.audio?"audio":"video",g=a.find(f),h=g[0];void 0!=g&&void 0!=h&&h.pause()}},playVideo:function(a,f){clearTimeout(a.data("videoplaywait"));var h=a.data();switch(h.videotype){case"youtube":if(0==a.find("iframe").length)a.append(a.data("videomarkup")),g(a,f,!0);else if(void 0!=h.player.playVideo){var i=d(a.data("videostartat")),j=h.player.getCurrentTime();1==a.data("nextslideatend-triggered")&&(j=-1,a.data("nextslideatend-triggered",0)),i!=-1&&i>j&&h.player.seekTo(i),h.youtubepausecalled!==!0&&h.player.playVideo()}else a.data("videoplaywait",setTimeout(function(){h.youtubepausecalled!==!0&&b.playVideo(a,f)},50));break;case"vimeo":if(0==a.find("iframe").length)a.append(a.data("videomarkup")),g(a,f,!0);else if(a.hasClass("rs-apiready")){var k=a.find("iframe").attr("id"),l=$f(k);void 0==l.api("play")?a.data("videoplaywait",setTimeout(function(){h.vimeopausecalled!==!0&&b.playVideo(a,f)},50)):setTimeout(function(){l.api("play");var b=d(a.data("videostartat")),c=a.data("currenttime");1==a.data("nextslideatend-triggered")&&(c=-1,a.data("nextslideatend-triggered",0)),b!=-1&&b>c&&l.api("seekTo",b)},510)}else a.data("videoplaywait",setTimeout(function(){h.vimeopausecalled!==!0&&b.playVideo(a,f)},50));break;case"html5":if(c&&1==a.data("disablevideoonmobile"))return!1;var m="html5"==h.audio?"audio":"video",n=a.find(m),o=n[0],p=n.parent();if(1!=p.data("metaloaded"))e(o,"loadedmetadata",function(a){b.resetVideo(a,f),o.play();var c=d(a.data("videostartat")),e=o.currentTime;1==a.data("nextslideatend-triggered")&&(e=-1,a.data("nextslideatend-triggered",0)),c!=-1&&c>e&&(o.currentTime=c)}(a));else{o.play();var i=d(a.data("videostartat")),j=o.currentTime;1==a.data("nextslideatend-triggered")&&(j=-1,a.data("nextslideatend-triggered",0)),i!=-1&&i>j&&(o.currentTime=i)}}},isVideoPlaying:function(a,b){var c=!1;return void 0!=b.playingvideos&&jQuery.each(b.playingvideos,function(b,d){a.attr("id")==d.attr("id")&&(c=!0)}),c},removeMediaFromList:function(a,b){l(a,b)},prepareCoveredVideo:function(a,c,d){var e=d.find("iframe, video"),f=a.split(":")[0],g=a.split(":")[1],h=d.closest(".tp-revslider-slidesli"),i=h.width()/h.height(),j=f/g,k=i/j*100,l=j/i*100;i>j?punchgs.TweenLite.to(e,.001,{height:k+"%",width:"100%",top:-(k-100)/2+"%",left:"0px",position:"absolute"}):punchgs.TweenLite.to(e,.001,{width:l+"%",height:"100%",left:-(l-100)/2+"%",top:"0px",position:"absolute"}),e.hasClass("resizelistener")||(e.addClass("resizelistener"),jQuery(window).resize(function(){clearTimeout(e.data("resizelistener")),e.data("resizelistener",setTimeout(function(){b.prepareCoveredVideo(a,c,d)},30))}))},checkVideoApis:function(a,b,c){"https:"===location.protocol?"https":"http";if((void 0!=a.data("ytid")||a.find("iframe").length>0&&a.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&(b.youtubeapineeded=!0),(void 0!=a.data("ytid")||a.find("iframe").length>0&&a.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&0==c.addedyt){b.youtubestarttime=jQuery.now(),c.addedyt=1;var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var f=document.getElementsByTagName("script")[0],g=!0;jQuery("head").find("*").each(function(){"https://www.youtube.com/iframe_api"==jQuery(this).attr("src")&&(g=!1)}),g&&f.parentNode.insertBefore(e,f)}if((void 0!=a.data("vimeoid")||a.find("iframe").length>0&&a.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&(b.vimeoapineeded=!0),(void 0!=a.data("vimeoid")||a.find("iframe").length>0&&a.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&0==c.addedvim){b.vimeostarttime=jQuery.now(),c.addedvim=1;var h=document.createElement("script"),f=document.getElementsByTagName("script")[0],g=!0;h.src="https://secure-a.vimeocdn.com/js/froogaloop2.min.js",jQuery("head").find("*").each(function(){"https://secure-a.vimeocdn.com/js/froogaloop2.min.js"==jQuery(this).attr("src")&&(g=!1)}),g&&f.parentNode.insertBefore(h,f)}return c},manageVideoLayer:function(a,f,h,i){var k=a.data(),l=k.videoattributes,m=k.ytid,n=k.vimeoid,o="auto"===k.videopreload||"canplay"===k.videopreload||"canplaythrough"===k.videopreload||"progress"===k.videopreload?"auto":k.videopreload,p=k.videomp4,q=k.videowebm,r=k.videoogv,s=k.allowfullscreenvideo,t=k.videocontrols,u="http",v="loop"==k.videoloop?"loop":"loopandnoslidestop"==k.videoloop?"loop":"",w=void 0!=p||void 0!=q?"html5":void 0!=m&&String(m).length>1?"youtube":void 0!=n&&String(n).length>1?"vimeo":"none",x="html5"==k.audio?"audio":"video",y="html5"==w&&0==a.find(x).length?"html5":"youtube"==w&&0==a.find("iframe").length?"youtube":"vimeo"==w&&0==a.find("iframe").length?"vimeo":"none";switch(v=k.nextslideatend===!0?"":v,k.videotype=w,y){case"html5":"controls"!=t&&(t="");var x="video";"html5"==k.audio&&(x="audio",a.addClass("tp-audio-html5"));var z="<"+x+' style="object-fit:cover;background-size:cover;visible:hidden;width:100%; height:100%" class="" '+v+' preload="'+o+'">';"auto"==o&&(f.mediapreload=!0),void 0!=q&&"firefox"==b.get_browser().toLowerCase()&&(z=z+'<source src="'+q+'" type="video/webm" />'),void 0!=p&&(z=z+'<source src="'+p+'" type="video/mp4" />'),void 0!=r&&(z=z+'<source src="'+r+'" type="video/ogg" />'),z=z+"</"+x+">";var A="";"true"!==s&&s!==!0||(A='<div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-full-screen">Full-Screen</button></div>'),"controls"==t&&(z+='<div class="tp-video-controls"><div class="tp-video-button-wrap"><button type="button" class="tp-video-button tp-vid-play-pause">Play</button></div><div class="tp-video-seek-bar-wrap"><input  type="range" class="tp-seek-bar" value="0"></div><div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-mute">Mute</button></div><div class="tp-video-vol-bar-wrap"><input  type="range" class="tp-volume-bar" min="0" max="1" step="0.1" value="1"></div>'+A+"</div>"),a.data("videomarkup",z),a.append(z),(c&&1==a.data("disablevideoonmobile")||b.isIE(8))&&a.find(x).remove(),a.find(x).each(function(c){var d=this,g=jQuery(this);g.parent().hasClass("html5vid")||g.wrap('<div class="html5vid" style="position:relative;top:0px;left:0px;width:100%;height:100%; overflow:hidden;"></div>');var h=g.parent();1!=h.data("metaloaded")&&e(d,"loadedmetadata",function(a){j(a,f),b.resetVideo(a,f)}(a))});break;case"youtube":u="https","none"==t&&(l=l.replace("controls=1","controls=0"),l.toLowerCase().indexOf("controls")==-1&&(l+="&controls=0")),k.videoinline!==!0&&"true"!==k.videoinline&&1!==k.videoinline||(l+="&playsinline=1");var B=d(a.data("videostartat")),C=d(a.data("videoendat"));B!=-1&&(l=l+"&start="+B),C!=-1&&(l=l+"&end="+C);var D=l.split("origin="+u+"://"),E="";D.length>1?(E=D[0]+"origin="+u+"://",self.location.href.match(/www/gi)&&!D[1].match(/www/gi)&&(E+="www."),E+=D[1]):E=l;var F="true"===s||s===!0?"allowfullscreen":"";a.data("videomarkup",'<iframe style="visible:hidden" type="text/html" src="'+u+"://www.youtube.com/embed/"+m+"?"+E+'" '+F+' width="100%" height="100%" style="width:100%;height:100%"></iframe>');break;case"vimeo":u="https",a.data("videomarkup",'<iframe style="visible:hidden" src="'+u+"://player.vimeo.com/video/"+n+"?autoplay=0&"+l+'" webkitallowfullscreen mozallowfullscreen allowfullscreen width="100%" height="100%" style="100%;height:100%"></iframe>')}var G=c&&"on"==a.data("noposteronmobile");if(void 0!=k.videoposter&&k.videoposter.length>2&&!G)0==a.find(".tp-videoposter").length&&a.append('<div class="tp-videoposter noSwipe" style="cursor:pointer; position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:3;background-image:url('+k.videoposter+'); background-size:cover;background-position:center center;"></div>'),0==a.find("iframe").length&&a.find(".tp-videoposter").click(function(){if(b.playVideo(a,f),c){if(1==a.data("disablevideoonmobile"))return!1;punchgs.TweenLite.to(a.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(a.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut})}});else{if(c&&1==a.data("disablevideoonmobile"))return!1;0!=a.find("iframe").length||"youtube"!=w&&"vimeo"!=w||(a.append(a.data("videomarkup")),g(a,f,!1))}"none"!=a.data("dottedoverlay")&&void 0!=a.data("dottedoverlay")&&1!=a.find(".tp-dottedoverlay").length&&a.append('<div class="tp-dottedoverlay '+a.data("dottedoverlay")+'"></div>'),a.addClass("HasListener"),1==a.data("bgvideo")&&punchgs.TweenLite.set(a.find("video, iframe"),{autoAlpha:0})}});var e=function(a,b,c){a.addEventListener?a.addEventListener(b,c,{capture:!1,passive:!0}):a.attachEvent(b,c,{capture:!1,passive:!0})},f=function(a,b,c){var d={};return d.video=a,d.videotype=b,d.settings=c,d},g=function(a,e,g){var j=a.data(),m=a.find("iframe"),n="iframe"+Math.round(1e5*Math.random()+1),o=j.videoloop,p="loopandnoslidestop"!=o;if(o="loop"==o||"loopandnoslidestop"==o,1==a.data("forcecover")){a.removeClass("fullscreenvideo").addClass("coverscreenvideo");var q=a.data("aspectratio");void 0!=q&&q.split(":").length>1&&b.prepareCoveredVideo(q,e,a)}if(1==a.data("bgvideo")){var q=a.data("aspectratio");void 0!=q&&q.split(":").length>1&&b.prepareCoveredVideo(q,e,a)}if(m.attr("id",n),g&&a.data("startvideonow",!0),1!==a.data("videolistenerexist"))switch(j.videotype){case"youtube":var r=new YT.Player(n,{events:{onStateChange:function(c){var g=a.closest(".tp-simpleresponsive"),q=(j.videorate,a.data("videostart"),i());if(c.data==YT.PlayerState.PLAYING)punchgs.TweenLite.to(a.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(a.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"mute"==a.data("volume")||b.lastToggleState(a.data("videomutetoggledby"))||e.globalmute===!0?r.mute():(r.unMute(),r.setVolume(parseInt(a.data("volume"),0)||75)),e.videoplaying=!0,k(a,e),p?e.c.trigger("stoptimer"):e.videoplaying=!1,e.c.trigger("revolution.slide.onvideoplay",f(r,"youtube",a.data())),b.toggleState(j.videotoggledby);else{if(0==c.data&&o){var s=d(a.data("videostartat"));s!=-1&&r.seekTo(s),r.playVideo(),b.toggleState(j.videotoggledby)}!q&&(0==c.data||2==c.data)&&"on"==a.data("showcoveronpause")&&a.find(".tp-videoposter").length>0&&(punchgs.TweenLite.to(a.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(a.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),c.data!=-1&&3!=c.data&&(e.videoplaying=!1,e.tonpause=!1,l(a,e),g.trigger("starttimer"),e.c.trigger("revolution.slide.onvideostop",f(r,"youtube",a.data())),void 0!=e.currentLayerVideoIsPlaying&&e.currentLayerVideoIsPlaying.attr("id")!=a.attr("id")||b.unToggleState(j.videotoggledby)),0==c.data&&1==a.data("nextslideatend")?(h(),a.data("nextslideatend-triggered",1),e.c.revnext(),l(a,e)):(l(a,e),e.videoplaying=!1,g.trigger("starttimer"),e.c.trigger("revolution.slide.onvideostop",f(r,"youtube",a.data())),void 0!=e.currentLayerVideoIsPlaying&&e.currentLayerVideoIsPlaying.attr("id")!=a.attr("id")||b.unToggleState(j.videotoggledby))}},onReady:function(b){var e=j.videorate;a.data("videostart");if(a.addClass("rs-apiready"),void 0!=e&&b.target.setPlaybackRate(parseFloat(e)),a.find(".tp-videoposter").unbind("click"),a.find(".tp-videoposter").click(function(){c||r.playVideo()}),a.data("startvideonow")){j.player.playVideo();var g=d(a.data("videostartat"));g!=-1&&j.player.seekTo(g)}a.data("videolistenerexist",1)}}});a.data("player",r);break;case"vimeo":for(var w,s=m.attr("src"),t={},u=s,v=/([^&=]+)=([^&]*)/g;w=v.exec(u);)t[decodeURIComponent(w[1])]=decodeURIComponent(w[2]);s=void 0!=t.player_id?s.replace(t.player_id,n):s+"&player_id="+n;try{s=s.replace("api=0","api=1")}catch(a){}s+="&api=1",m.attr("src",s);var r=a.find("iframe")[0],y=(jQuery("#"+n),$f(n));y.addEvent("ready",function(){if(a.addClass("rs-apiready"),y.addEvent("play",function(c){a.data("nextslidecalled",0),punchgs.TweenLite.to(a.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(a.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),e.c.trigger("revolution.slide.onvideoplay",f(y,"vimeo",a.data())),e.videoplaying=!0,k(a,e),p?e.c.trigger("stoptimer"):e.videoplaying=!1,"mute"==a.data("volume")||b.lastToggleState(a.data("videomutetoggledby"))||e.globalmute===!0?y.api("setVolume","0"):y.api("setVolume",parseInt(a.data("volume"),0)/100||.75),b.toggleState(j.videotoggledby)}),y.addEvent("playProgress",function(b){var c=d(a.data("videoendat"));if(a.data("currenttime",b.seconds),0!=c&&Math.abs(c-b.seconds)<.3&&c>b.seconds&&1!=a.data("nextslidecalled"))if(o){y.api("play");var f=d(a.data("videostartat"));f!=-1&&y.api("seekTo",f)}else 1==a.data("nextslideatend")&&(a.data("nextslideatend-triggered",1),a.data("nextslidecalled",1),e.c.revnext()),y.api("pause")}),y.addEvent("finish",function(c){l(a,e),e.videoplaying=!1,e.c.trigger("starttimer"),e.c.trigger("revolution.slide.onvideostop",f(y,"vimeo",a.data())),1==a.data("nextslideatend")&&(a.data("nextslideatend-triggered",1),e.c.revnext()),void 0!=e.currentLayerVideoIsPlaying&&e.currentLayerVideoIsPlaying.attr("id")!=a.attr("id")||b.unToggleState(j.videotoggledby)}),y.addEvent("pause",function(c){a.find(".tp-videoposter").length>0&&"on"==a.data("showcoveronpause")&&(punchgs.TweenLite.to(a.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(a.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),e.videoplaying=!1,e.tonpause=!1,l(a,e),e.c.trigger("starttimer"),e.c.trigger("revolution.slide.onvideostop",f(y,"vimeo",a.data())),void 0!=e.currentLayerVideoIsPlaying&&e.currentLayerVideoIsPlaying.attr("id")!=a.attr("id")||b.unToggleState(j.videotoggledby)}),a.find(".tp-videoposter").unbind("click"),a.find(".tp-videoposter").click(function(){if(!c)return y.api("play"),!1}),a.data("startvideonow")){y.api("play");var g=d(a.data("videostartat"));g!=-1&&y.api("seekTo",g)}a.data("videolistenerexist",1)})}else{var z=d(a.data("videostartat"));switch(j.videotype){case"youtube":g&&(j.player.playVideo(),z!=-1&&j.player.seekTo());break;case"vimeo":if(g){var y=$f(a.find("iframe").attr("id"));y.api("play"),z!=-1&&y.api("seekTo",z)}}}},h=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},i=function(){try{if(void 0!==window.fullScreen)return window.fullScreen;var a=5;return jQuery.browser.webkit&&/Apple Computer/.test(navigator.vendor)&&(a=42),screen.width==window.innerWidth&&Math.abs(screen.height-window.innerHeight)<a}catch(a){}},j=function(a,g,j){if(c&&1==a.data("disablevideoonmobile"))return!1;var m=a.data(),n="html5"==m.audio?"audio":"video",o=a.find(n),p=o[0],q=o.parent(),r=m.videoloop,s="loopandnoslidestop"!=r;if(r="loop"==r||"loopandnoslidestop"==r,q.data("metaloaded",1),1!=a.data("bgvideo")||"none"!==m.videoloop&&m.videoloop!==!1||(s=!1),void 0==o.attr("control")&&(0!=a.find(".tp-video-play-button").length||c||a.append('<div class="tp-video-play-button"><i class="revicon-right-dir"></i><span class="tp-revstop">&nbsp;</span></div>'),a.find("video, .tp-poster, .tp-video-play-button").click(function(){a.hasClass("videoisplaying")?p.pause():p.play()})),1==a.data("forcecover")||a.hasClass("fullscreenvideo")||1==a.data("bgvideo"))if(1==a.data("forcecover")||1==a.data("bgvideo")){q.addClass("fullcoveredvideo");var t=a.data("aspectratio")||"4:3";b.prepareCoveredVideo(t,g,a)}else q.addClass("fullscreenvideo");var u=a.find(".tp-vid-play-pause")[0],v=a.find(".tp-vid-mute")[0],w=a.find(".tp-vid-full-screen")[0],x=a.find(".tp-seek-bar")[0],y=a.find(".tp-volume-bar")[0];void 0!=u&&e(u,"click",function(){1==p.paused?p.play():p.pause()}),void 0!=v&&e(v,"click",function(){0==p.muted?(p.muted=!0,v.innerHTML="Unmute"):(p.muted=!1,v.innerHTML="Mute")}),void 0!=w&&w&&e(w,"click",function(){p.requestFullscreen?p.requestFullscreen():p.mozRequestFullScreen?p.mozRequestFullScreen():p.webkitRequestFullscreen&&p.webkitRequestFullscreen()}),void 0!=x&&(e(x,"change",function(){var a=p.duration*(x.value/100);p.currentTime=a}),e(x,"mousedown",function(){a.addClass("seekbardragged"),p.pause()}),e(x,"mouseup",function(){a.removeClass("seekbardragged"),p.play()})),e(p,"canplaythrough",function(){b.preLoadAudioDone(a,g,"canplaythrough")}),e(p,"canplay",function(){b.preLoadAudioDone(a,g,"canplay")}),e(p,"progress",function(){b.preLoadAudioDone(a,g,"progress")}),e(p,"timeupdate",function(){var b=100/p.duration*p.currentTime,c=d(a.data("videoendat")),e=p.currentTime;if(void 0!=x&&(x.value=b),0!=c&&c!=-1&&Math.abs(c-e)<=.3&&c>e&&1!=a.data("nextslidecalled"))if(r){p.play();var f=d(a.data("videostartat"));f!=-1&&(p.currentTime=f)}else 1==a.data("nextslideatend")&&(a.data("nextslideatend-triggered",1),a.data("nextslidecalled",1),g.just_called_nextslide_at_htmltimer=!0,g.c.revnext(),setTimeout(function(){g.just_called_nextslide_at_htmltimer=!1},1e3)),p.pause()}),void 0!=y&&e(y,"change",function(){p.volume=y.value}),e(p,"play",function(){a.data("nextslidecalled",0);var c=a.data("volume");c=void 0!=c&&"mute"!=c?parseFloat(c)/100:c,g.globalmute===!0?p.muted=!0:p.muted=!1,c>1&&(c/=100),"mute"==c?p.muted=!0:void 0!=c&&(p.volume=c),a.addClass("videoisplaying");var d="html5"==m.audio?"audio":"video";k(a,g),s&&"audio"!=d?(g.videoplaying=!0,g.c.trigger("stoptimer"),g.c.trigger("revolution.slide.onvideoplay",f(p,"html5",m))):(g.videoplaying=!1,"audio"!=d&&g.c.trigger("starttimer"),g.c.trigger("revolution.slide.onvideostop",f(p,"html5",m))),punchgs.TweenLite.to(a.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(a.find(d),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});var e=a.find(".tp-vid-play-pause")[0],h=a.find(".tp-vid-mute")[0];void 0!=e&&(e.innerHTML="Pause"),void 0!=h&&p.muted&&(h.innerHTML="Unmute"),b.toggleState(m.videotoggledby)}),e(p,"pause",function(){var c="html5"==m.audio?"audio":"video",d=i();!d&&a.find(".tp-videoposter").length>0&&"on"==a.data("showcoveronpause")&&!a.hasClass("seekbardragged")&&(punchgs.TweenLite.to(a.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(a.find(c),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),a.removeClass("videoisplaying"),g.videoplaying=!1,l(a,g),"audio"!=c&&g.c.trigger("starttimer"),g.c.trigger("revolution.slide.onvideostop",f(p,"html5",a.data()));var e=a.find(".tp-vid-play-pause")[0];void 0!=e&&(e.innerHTML="Play"),void 0!=g.currentLayerVideoIsPlaying&&g.currentLayerVideoIsPlaying.attr("id")!=a.attr("id")||b.unToggleState(m.videotoggledby)}),e(p,"ended",function(){h(),l(a,g),g.videoplaying=!1,l(a,g),"audio"!=n&&g.c.trigger("starttimer"),g.c.trigger("revolution.slide.onvideostop",f(p,"html5",a.data())),a.data("nextslideatend")===!0&&p.currentTime>0&&(1==!g.just_called_nextslide_at_htmltimer&&(a.data("nextslideatend-triggered",1),g.c.revnext(),g.just_called_nextslide_at_htmltimer=!0),setTimeout(function(){g.just_called_nextslide_at_htmltimer=!1},1500)),a.removeClass("videoisplaying")})},k=function(a,c){void 0==c.playingvideos&&(c.playingvideos=new Array),a.data("stopallvideos")&&void 0!=c.playingvideos&&c.playingvideos.length>0&&(c.lastplayedvideos=jQuery.extend(!0,[],c.playingvideos),jQuery.each(c.playingvideos,function(a,d){b.stopVideo(d,c)})),c.playingvideos.push(a),c.currentLayerVideoIsPlaying=a},l=function(a,b){void 0!=b.playingvideos&&jQuery.inArray(a,b.playingvideos)>=0&&b.playingvideos.splice(jQuery.inArray(a,b.playingvideos),1)}}(jQuery);